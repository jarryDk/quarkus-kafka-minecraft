<!doctype html>
<html>
<head>
  <title>Players with vis.js</title>

  <style> 
    body {font: 10pt arial;}
  </style>

  <script type="text/javascript" src="lib/vis/vis-graph3d.min.js"></script>

  <script type="text/javascript">
    var data = null;
    var graph = null;

    function onclick(point) {
      console.log(point);
    }

    // Called when the Visualization API is loaded.
    function drawVisualization() {
      // create the data table.
      data = new vis.DataSet();

      // create some shortcuts to math functions
      var sqrt = Math.sqrt;
      var pow = Math.pow;
      var random = Math.random;

      // create the animation data
      data.add({
          x:0,
          y:0,
          z:0,
          style:0.9948814107785937}
      );

      // specify options
      var options = {
        width:  '800px',
        height: '800px',
        style: 'dot-color',
        showPerspective: true,
        showGrid: true,
        keepAspectRatio: true,
        verticalRatio: 1.0,
        cameraPosition: {
          horizontal: -0.35,
          vertical: 0.22,
          distance: 1.8
        }
      };

      // create our graph
      var container = document.getElementById('mygraph');
      graph = new vis.Graph3d(container, data, options);
      graph.on('click', onclick);
    }
  </script>

  <script>
    var source = new EventSource("/players");
        source.onmessage = (event) => {
            console.log("event ... " + event);
            var json = JSON.parse(event.data);
            console.log(json);
            data.add({
                x:json.x,
                y:json.y,
                z:json.z,
                style:0.9948814107785937
                });
        };
  </script>

</head>

<body onload="drawVisualization()">

<div id="mygraph"></div>
<div id="info"></div>

</body>
</html>
